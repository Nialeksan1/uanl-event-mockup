<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registro | Eventos UANL</title>
  
  <!-- Google Fonts: Montserrat -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Favicon UANL -->
  <link rel="icon" href="https://www.uanl.mx/wp-content/themes/uanl/assets/img/favicon.ico" type="image/x-icon">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Montserrat', sans-serif;
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      color: #333;
      line-height: 1.6;
    }

    header {
      background-color: #00205B;
      color: white;
      padding: 1rem 2rem;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .header-content {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .logo img {
      height: 50px;
    }

    .logo h1 {
      font-size: 1.4rem;
      font-weight: 600;
    }

    nav {
      display: flex;
      gap: 2rem;
    }

    nav a {
      color: white;
      text-decoration: none;
      font-weight: 500;
      font-size: 1rem;
      padding: 0.5rem 0;
      position: relative;
      transition: color 0.3s;
    }

    nav a:hover, nav a.active {
      color: #FFB81C;
    }

    nav a.active::after {
      content: '';
      position: absolute;
      bottom: -8px;
      left: 0;
      width: 100%;
      height: 3px;
      background-color: #FFB81C;
      border-radius: 2px;
    }

    .register-container {
      min-height: 80vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 2rem;
    }

    .register-box {
      background: white;
      padding: 3rem 2.5rem;
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0, 32, 91, 0.1);
      max-width: 500px;
      width: 100%;
      text-align: center;
      border: 1px solid #e0e0e0;
      transition: all 0.4s ease;
    }

    .uanl-logo {
      width: 100px;
      margin-bottom: 1.5rem;
      filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
    }

    .register-box h2 {
      color: #00205B;
      font-weight: 700;
      font-size: 1.7rem;
      margin-bottom: 0.5rem;
    }

    .register-box p.subtitle {
      color: #555;
      font-size: 0.95rem;
      margin-bottom: 2rem;
    }

    /* Selector inicial */
    .selector-box {
      display: flex;
      gap: 1rem;
      justify-content: center;
      margin-bottom: 2rem;
    }

    .selector-btn {
      flex: 1;
      padding: 1rem;
      border: 2px solid #ccc;
      border-radius: 10px;
      background: #fafafa;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      color: #00205B;
    }

    .selector-btn.active {
      border-color: #00205B;
      background: #00205B;
      color: white;
      box-shadow: 0 4px 12px rgba(0, 32, 91, 0.2);
    }

    .selector-btn:hover:not(.active) {
      border-color: #00205B;
      background: #f0f4ff;
    }

    /* Formularios ocultos por defecto */
    .form-section {
      display: none;
      animation: fadeIn 0.5s ease;
    }

    .form-section.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .form-group {
      margin-bottom: 1.2rem;
      text-align: left;
    }

    .form-row {
      display: flex;
      gap: 1rem;
    }

    .form-row .form-group {
      flex: 1;
    }

    .form-group label {
      display: block;
      color: #00205B;
      font-weight: 600;
      font-size: 0.95rem;
      margin-bottom: 0.4rem;
    }

    .form-group input {
      width: 100%;
      padding: 0.8rem 1rem;
      border: 1.5px solid #ccc;
      border-radius: 8px;
      font-size: 1rem;
      transition: all 0.3s;
      background-color: #fafafa;
    }

    .form-group input:focus {
      outline: none;
      border-color: #00205B;
      background-color: white;
      box-shadow: 0 0 0 3px rgba(0, 32, 91, 0.1);
    }

    .verification-status {
      font-size: 0.85rem;
      margin-top: 0.4rem;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 0.4rem;
    }

    .status-checking { color: #666; }
    .status-success { color: #28a745; }
    .status-error { color: #dc3545; }

    .status-icon {
      width: 16px;
      height: 16px;
    }

    .register-btn {
      background-color: #00205B;
      color: white;
      border: none;
      padding: 0.9rem;
      border-radius: 8px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      margin-top: 1.5rem;
      transition: all 0.3s;
    }

    .register-btn:hover {
      background-color: #FFB81C;
      color: #00205B;
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(255, 184, 28, 0.3);
    }

    .register-btn:disabled {
      background-color: #ccc;
      cursor: not-allowed;
      transform: none;
    }

    .footer-text {
      margin-top: 1.8rem;
      font-size: 0.92rem;
      color: #666;
    }

    .footer-text a {
      color: #00205B;
      text-decoration: none;
      font-weight: 600;
    }

    .footer-text a:hover {
      color: #FFB81C;
      text-decoration: underline;
    }

    footer {
      text-align: center;
      padding: 1.5rem;
      background-color: #00205B;
      color: white;
      font-size: 0.9rem;
      margin-top: 3rem;
    }

    @media (max-width: 480px) {
      .register-box {
        padding: 2rem 1.5rem;
        margin: 1rem;
      }
      .selector-box {
        flex-direction: column;
      }
      .form-row {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>

  <header>
    <div class="header-content">
      <div class="logo">
        <img src="img/Logo_de_la_UANL.svg" alt="Logo UANL">
        <h1>Eventos UANL</h1>
      </div>
      <nav>
        <a href="index.html">Inicio</a>
        <a href="eventos.html">Eventos</a>
        <a href="login-publico.html">Iniciar sesión</a>
      </nav>
    </div>
  </header>

  <main class="register-container">
    <div class="register-box">
      <img src="img/Logo_de_la_UANL.svg" alt="Escudo UANL" class="uanl-logo">
      <h2>Crear Cuenta</h2>
      <p class="subtitle">Elige tu tipo de acceso</p>

      <!-- Selector inicial -->
      <div class="selector-box">
        <div class="selector-btn active" onclick="seleccionarTipo('estudiante')">
          <strong>Sí, soy estudiante</strong><br>
          <small>Matrícula UANL</small>
        </div>
        <div class="selector-btn" onclick="seleccionarTipo('externo')">
          <strong>No, soy externo</strong><br>
          <small>Público general</small>
        </div>
      </div>

      <!-- Formulario Estudiante -->
      <div id="formEstudiante" class="form-section active">
        <form id="formEstudianteSubmit" onsubmit="return validarEstudiante(event)">
          <div class="form-group">
            <label for="matricula">Matrícula (7 dígitos)</label>
            <input type="text" id="matricula" placeholder="1234567" maxlength="7" required>
            <div class="verification-status" id="statusMatricula"></div>
          </div>

          <div class="form-group">
            <label for="passwordEst">Contraseña institucional</label>
            <input type="password" id="passwordEst" placeholder="•••••••" required>
          </div>

          <button type="submit" class="register-btn" id="btnEstudiante">
            Verificar y Crear Cuenta
          </button>
        </form>
      </div>

      <!-- Formulario Externo -->
      <div id="formExterno" class="form-section">
        <form id="formExternoSubmit" onsubmit="return validarExterno(event)">
          <div class="form-row">
            <div class="form-group">
              <label for="nombre">Nombre(s)</label>
              <input type="text" id="nombre" placeholder="Ana Laura" required>
            </div>
            <div class="form-group">
              <label for="apellidos">Apellidos</label>
              <input type="text" id="apellidos" placeholder="Gómez Ruiz" required>
            </div>
          </div>

          <div class="form-group">
            <label for="emailExt">Correo electrónico</label>
            <input type="email" id="emailExt" placeholder="ana@gmail.com" required>
          </div>

          <div class="form-group">
            <label for="passwordExt">Contraseña</label>
            <input type="password" id="passwordExt" placeholder="Mínimo 8 caracteres" required minlength="8">
          </div>

          <div class="form-group">
            <label for="confirmExt">Confirmar contraseña</label>
            <input type="password" id="confirmExt" placeholder="Repite tu contraseña" required>
          </div>

          <button type="submit" class="register-btn" id="btnExterno">
            Crear Cuenta
          </button>
        </form>
      </div>

      <p class="footer-text">
        ¿Ya tienes cuenta? <a href="login-publico.html">Inicia sesión aquí</a>
      </p>
    </div>
  </main>

  <footer>
    <p>© 2025 Universidad Autónoma de Nuevo León | Dirección de Tecnologías de Información</p>
  </footer>

  <script>
    // Cambiar entre formularios
    function seleccionarTipo(tipo) {
      const btnEst = document.querySelectorAll('.selector-btn')[0];
      const btnExt = document.querySelectorAll('.selector-btn')[1];
      const formEst = document.getElementById('formEstudiante');
      const formExt = document.getElementById('formExterno');

      if (tipo === 'estudiante') {
        btnEst.classList.add('active');
        btnExt.classList.remove('active');
        formEst.classList.add('active');
        formExt.classList.remove('active');
      } else {
        btnExt.classList.add('active');
        btnEst.classList.remove('active');
        formExt.classList.add('active');
        formEst.classList.remove('active');
      }
    }

    // Verificación de estudiante (SIASE simulado)
    async function verificarEstudiante() {
      const matricula = document.getElementById('matricula').value.trim();
      const status = document.getElementById('statusMatricula');
      const icon = '<svg class="status-icon" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none"/><path d="M8 12l2 2 4-4" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg>';

      if (matricula.length !== 7 || !/^\d+$/.test(matricula)) {
        status.className = 'verification-status status-error';
        status.innerHTML = icon + 'Matrícula debe tener 7 dígitos';
        return false;
      }

      status.className = 'verification-status status-checking';
      status.innerHTML = icon + 'Verificando con SIASE...';

      await new Promise(r => setTimeout(r, 1300));

      // Matrículas válidas (simuladas)
      const validas = ['1234567', '9876543', '5555666', '1122334'];
      const esValida = validas.includes(matricula);

      if (esValida) {
        status.className = 'verification-status status-success';
        status.innerHTML = icon + 'Estudiante verificado';
        return true;
      } else {
        status.className = 'verification-status status-error';
        status.innerHTML = icon + 'Matrícula no encontrada o inactiva';
        return false;
      }
    }

    // Validar estudiante
    function validarEstudiante(e) {
      e.preventDefault();
      const btn = document.getElementById('btnEstudiante');
      const password = document.getElementById('passwordEst').value;

      if (password.length < 6) {
        alert('La contraseña debe tener al menos 6 caracteres');
        return false;
      }

      if (!verificarEstudiante()) {
        alert('Por favor ingresa una matrícula válida');
        return false;
      }

      btn.disabled = true;
      btn.textContent = 'Creando cuenta...';

      setTimeout(() => {
        alert('¡Cuenta creada con éxito!\nBienvenido(a), estudiante UANL.');
        window.location.href = 'eventos.html';
      }, 1500);
    }

    // Validar externo
    function validarExterno(e) {
      e.preventDefault();
      const password = document.getElementById('passwordExt').value;
      const confirm = document.getElementById('confirmExt').value;
      const btn = document.getElementById('btnExterno');

      if (password !== confirm) {
        alert('Las contraseñas no coinciden');
        return false;
      }

      btn.disabled = true;
      btn.textContent = 'Creando cuenta...';

      setTimeout(() => {
        alert('¡Cuenta creada con éxito!\nYa puedes iniciar sesión.');
        window.location.href = 'login-publico.html';
      }, 1500);
    }

    // Verificación en tiempo real
    /*document.getElementById('matricula')?.addEventListener('input', () => {
      clearTimeout(window.timeout);
      window.timeout = setTimeout(verificarEstudiante, 700);
    });*/
  </script>

</body>
</html>